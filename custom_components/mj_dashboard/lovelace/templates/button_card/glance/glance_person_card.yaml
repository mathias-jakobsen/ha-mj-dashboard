# mj_dashboard

mj_glance_person_card:
  template: mj_glance_card

  variables:
    mj_color: var(--mj-color-person)

  icon: mdi:account
  state_display: >
    [[[
      const persons_home = Object.keys(states).filter(entity_id => entity_id.split(".")[0] == "person" && states[entity_id].state == "home");
      return persons_home.length > 0 ? "{{ mj.translations.location_home }}" : "{{ mj.translations.location_away }}";
    ]]]

  tap_action:
    action: "[[[ return Object.keys(hass.services).includes('browser_mod') ? 'fire-dom-event' : 'none'; ]]]"
    browser_mod:
      service: browser_mod.popup
      data:
        title: Persons
        content:
          type: custom:layout-card
          layout_type: grid
          layout:
            grid-gap: var(--mj-layout-grid-gap)
            grid-template-columns: repeat(auto-fill, minmax({{ mj.domains.get_by_id("person").card_size }}, 1fr))
            margin: 0
            padding: 0
        right_button: Turn off lights
        right_button_action:
          service: light.turn_off
          data:
            entity_id: "[[[ return Object.keys(states).filter(entity_id => entity_id.split('.')[0] == 'light' && states[entity_id].state == 'on'); ]]]"
